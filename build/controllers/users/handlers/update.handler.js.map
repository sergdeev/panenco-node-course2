{"version":3,"sources":["../../../../src/controllers/users/handlers/update.handler.ts"],"sourcesContent":["import { NotFound } from '@panenco/papi';\nimport { UserBody } from '../../../contracts/user.body.js';\nimport { RequestContext } from '@mikro-orm/core';\nimport { User } from '../../../entities/user.entity.js';\n\nexport const update = async (id: string, body: UserBody) => {\n  const em = RequestContext.getEntityManager();\n  const user = em.findOne(User, {id});\n  if (!user) {\n    throw new NotFound('userNotFound', 'User not found');\n  }\n  user.assign(body);\n\tawait em.flush();\n  return user\n};\n"],"names":["NotFound","RequestContext","User","update","id","body","em","getEntityManager","user","findOne","assign","flush"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,gBAAgB;AAEzC,SAASC,cAAc,QAAQ,kBAAkB;AACjD,SAASC,IAAI,QAAQ,mCAAmC;AAExD,OAAO,MAAMC,SAAS,OAAOC,IAAYC;IACvC,MAAMC,KAAKL,eAAeM,gBAAgB;IAC1C,MAAMC,OAAOF,GAAGG,OAAO,CAACP,MAAM;QAACE;IAAE;IACjC,IAAI,CAACI,MAAM;QACT,MAAM,IAAIR,SAAS,gBAAgB;IACrC;IACAQ,KAAKE,MAAM,CAACL;IACb,MAAMC,GAAGK,KAAK;IACb,OAAOH;AACT,EAAE"}