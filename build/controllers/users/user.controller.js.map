{"version":3,"sources":["../../../src/controllers/users/user.controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from 'express';\n\nimport { UserBody } from '../../contracts/user.body.js';\nimport { create } from './handlers/create.handler.js';\nimport { deleteUser } from './handlers/delete.handler.js';\nimport { get } from './handlers/get.handler.js';\nimport { getList } from './handlers/getList.handler.js';\nimport { update } from './handlers/update.handler.js';\nimport { Authorized, Delete, Get, JsonController, Param, Patch, Post } from 'routing-controllers';\nimport { Body, ListRepresenter, Query, Representer, StatusCode } from '@panenco/papi';\nimport { SearchQuery } from '../../contracts/search.query.js';\nimport { UserView } from '../../contracts/user.view.js';\nimport { OpenAPI } from 'routing-controllers-openapi';\n\n@JsonController('/users')\nexport class UserController {\n\t@Post()\n\t@OpenAPI({summary: 'Create a new user'})\n\t@Representer(UserView, StatusCode.created)\n\tasync create(@Body() body: UserBody) {\n\t\treturn create(body);\n\t}\n\n\t@Get()\n\t@Authorized()\n\t@OpenAPI({summary: 'Get users list'})\n\t@ListRepresenter(UserView)\n\tasync getList(@Query() query: SearchQuery) {\n\t\treturn getList(query.search);\n\t}\n\n\t@Get('/:id')\n\t@Authorized()\n\t@OpenAPI({summary: 'Get a user by id'})\n\t@Representer(UserView)\n\tasync get(@Param('id') id: string) {\n\t  return get(id);\n\t}\n  \n\n\t@Patch('/:id')\n\t@Authorized()\n\t@OpenAPI({summary: 'Edit user'})\n\t@Representer(UserView)\n\tasync update(@Param('id') id: string, @Body({}, {skipMissingProperties: true}) body: UserBody) {\n\t\treturn update(id, body);\n\t}\n\n\t@Delete('/:id')\n\t@Authorized()\n\t@OpenAPI({summary: 'Delete user'})\n\t@Representer(null)\n\tasync delete(@Param('id') id: string) {\n\t\tdeleteUser(id);\n\t\treturn null;\n\t}\n}"],"names":["UserBody","create","deleteUser","get","getList","update","Authorized","Delete","Get","JsonController","Param","Patch","Post","Body","ListRepresenter","Query","Representer","StatusCode","SearchQuery","UserView","OpenAPI","UserController","body","query","search","id","delete","summary","created","skipMissingProperties"],"mappings":";;;;;;;;;;;;;;AAEA,SAASA,QAAQ,QAAQ,+BAA+B;AACxD,SAASC,MAAM,QAAQ,+BAA+B;AACtD,SAASC,UAAU,QAAQ,+BAA+B;AAC1D,SAASC,GAAG,QAAQ,4BAA4B;AAChD,SAASC,OAAO,QAAQ,gCAAgC;AACxD,SAASC,MAAM,QAAQ,+BAA+B;AACtD,SAASC,UAAU,EAAEC,MAAM,EAAEC,GAAG,EAAEC,cAAc,EAAEC,KAAK,EAAEC,KAAK,EAAEC,IAAI,QAAQ,sBAAsB;AAClG,SAASC,IAAI,EAAEC,eAAe,EAAEC,KAAK,EAAEC,WAAW,EAAEC,UAAU,QAAQ,gBAAgB;AACtF,SAASC,WAAW,QAAQ,kCAAkC;AAC9D,SAASC,QAAQ,QAAQ,+BAA+B;AACxD,SAASC,OAAO,QAAQ,8BAA8B;AAGtD,WAAaC,iBAAN;IACN,MAGMpB,OAAO,AAAQqB,IAAc,EAAE;QACpC,OAAOrB,OAAOqB;IACf;IAEA,MAIMlB,QAAQ,AAASmB,KAAkB,EAAE;QAC1C,OAAOnB,QAAQmB,MAAMC,MAAM;IAC5B;IAEA,MAIMrB,IAAI,AAAasB,EAAU,EAAE;QACjC,OAAOtB,IAAIsB;IACb;IAGA,MAIMpB,OAAO,AAAaoB,EAAU,EAAE,AAAyCH,IAAc,EAAE;QAC9F,OAAOjB,OAAOoB,IAAIH;IACnB;IAEA,MAIMI,OAAO,AAAaD,EAAU,EAAE;QACrCvB,WAAWuB;QACX,OAAO;IACR;AACD;;IAxCEb;IACAQ,QAAQ;QAACO,SAAS;IAAmB;IACrCX,YAAYG,UAAUF,WAAWW,OAAO;IAC3Bf,aAAAA;;;eAAa,oCAAA;;GAJfQ;;IAQXb;IACAF;IACAc,QAAQ;QAACO,SAAS;IAAgB;IAClCb,gBAAgBK;IACFJ,aAAAA;;;eAAe,uCAAA;;GAZlBM;;IAgBXb,IAAI;IACJF;IACAc,QAAQ;QAACO,SAAS;IAAkB;IACpCX,YAAYG;IACFT,aAAAA,MAAM;;;;;GApBLW;;IAyBXV,MAAM;IACNL;IACAc,QAAQ;QAACO,SAAS;IAAW;IAC7BX,YAAYG;IACCT,aAAAA,MAAM;IAAmBG,aAAAA,KAAK,CAAC,GAAG;QAACgB,uBAAuB;IAAI;;;;eAAS,oCAAA;;GA7BzER;;IAiCXd,OAAO;IACPD;IACAc,QAAQ;QAACO,SAAS;IAAa;IAC/BX,YAAY;IACCN,aAAAA,MAAM;;;;;GArCRW;AAAAA;IADZZ,eAAe;GACHY"}